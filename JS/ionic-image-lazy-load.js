angular.module("ionicLazyLoad",[]);angular.module("ionicLazyLoad").directive("lazyScroll",["$rootScope",function(a){return{restrict:"A",link:function(d,c){var b=d.$onScroll;d.$onScroll=function(){a.$broadcast("lazyScrollEvent");if(typeof b==="function"){b()}}}}}]).directive("imageLazySrc",["$document","$timeout","$ionicScrollDelegate","$compile",function(d,b,c,a){return{restrict:"A",scope:{lazyScrollResize:"@lazyScrollResize",imageLazyBackgroundImage:"@imageLazyBackgroundImage",imageLazySrc:"@"},link:function(i,g,f){if(!f.imageLazyDistanceFromBottomToLoad){f.imageLazyDistanceFromBottomToLoad=0}if(!f.imageLazyDistanceFromRightToLoad){f.imageLazyDistanceFromRightToLoad=0}var e;if(f.imageLazyLoader){e=a('<div class="image-loader-container"><ion-spinner class="image-loader" icon="'+f.imageLazyLoader+'"></ion-spinner></div>')(i);g.after(e)}i.$watch("imageLazySrc",function(m,l){if(e){e.remove()}if(f.imageLazyLoader){e=a('<div class="image-loader-container"><ion-spinner class="image-loader" icon="'+f.imageLazyLoader+'"></ion-spinner></div>')(i);g.after(e)}var n=i.$on("lazyScrollEvent",function(){if(h()){j();n()}});b(function(){if(h()){j();n()}},500)});var k=i.$on("lazyScrollEvent",function(){if(h()){j();k()}});function j(){g.bind("load",function(m){if(f.imageLazyLoader){e.remove()}if(i.lazyScrollResize=="true"){c.resize()}g.unbind("load")});if(i.imageLazyBackgroundImage=="true"){var l=new Image();l.onload=function(){if(f.imageLazyLoader){e.remove()}g[0].style.backgroundImage="url("+f.imageLazySrc+")";if(i.lazyScrollResize=="true"){c.resize()}};l.src=f.imageLazySrc}else{g[0].src=f.imageLazySrc}}function h(){var l=d[0].documentElement.clientHeight;var n=d[0].documentElement.clientWidth;var m=g[0].getBoundingClientRect();return(m.top>=0&&m.top<=l+parseInt(f.imageLazyDistanceFromBottomToLoad))&&(m.left>=0&&m.left<=n+parseInt(f.imageLazyDistanceFromRightToLoad))}g.on("$destroy",function(){k()});b(function(){if(h()){j();k()}},500)}}}]);